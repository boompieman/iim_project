<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_91) on Sat Mar 19 01:50:13 CST 2016 -->
<title>ConditionDistributorTemplate</title>
<meta name="date" content="2016-03-19">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="ConditionDistributorTemplate";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../net/sourceforge/nite/search/rewriter/ConditionDistributor.html" title="interface in net.sourceforge.nite.search.rewriter"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../net/sourceforge/nite/search/rewriter/DeclarableVariable.html" title="class in net.sourceforge.nite.search.rewriter"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?net/sourceforge/nite/search/rewriter/ConditionDistributorTemplate.html" target="_top">Frames</a></li>
<li><a href="ConditionDistributorTemplate.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">net.sourceforge.nite.search.rewriter</div>
<h2 title="Class ConditionDistributorTemplate" class="title">Class ConditionDistributorTemplate</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>net.sourceforge.nite.search.rewriter.ConditionDistributorTemplate</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../../net/sourceforge/nite/search/ParserTreeConstants.html" title="interface in net.sourceforge.nite.search">ParserTreeConstants</a>, <a href="../../../../../net/sourceforge/nite/search/rewriter/ConditionDistributor.html" title="interface in net.sourceforge.nite.search.rewriter">ConditionDistributor</a>, <a href="../../../../../net/sourceforge/nite/search/rewriter/RewriterConstants.html" title="interface in net.sourceforge.nite.search.rewriter">RewriterConstants</a></dd>
</dl>
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><a href="../../../../../net/sourceforge/nite/search/rewriter/DefaultConditionDistributor.html" title="class in net.sourceforge.nite.search.rewriter">DefaultConditionDistributor</a></dd>
</dl>
<hr>
<br>
<pre>public abstract class <span class="strong">ConditionDistributorTemplate</span>
extends java.lang.Object
implements <a href="../../../../../net/sourceforge/nite/search/rewriter/ConditionDistributor.html" title="interface in net.sourceforge.nite.search.rewriter">ConditionDistributor</a>, <a href="../../../../../net/sourceforge/nite/search/ParserTreeConstants.html" title="interface in net.sourceforge.nite.search">ParserTreeConstants</a>, <a href="../../../../../net/sourceforge/nite/search/rewriter/RewriterConstants.html" title="interface in net.sourceforge.nite.search.rewriter">RewriterConstants</a></pre>
<div class="block">This class provides a template algorithm for the condition distribution process,
 implementing the features that should be common to any rewriting, while leaving 
 as abstract the core distribution algorithm, which provides a solution to the 
 constraint-satisfaction problem of distributing the remaining conditions.
 <p>
 We know that some variables and conditions must occur together, and for efficiency
 should occur in particular positions in the ordered subqueries. Concrete
 implementations of this class should implement <method>distributeRemainingConditions()</method> 
 in order to provide a pluggable algorithm for distributing the remaining conditions 
 and variable declarations according to their own heuristics or algorithms.
 <p>
 This template implementation of the ConditionDistributor works by incrementally creating
 declarations for different classes of variable/condition. It creates minimal-variable 
 SimpleQueries using the following heuristics (note that the rules are applied only to those 
 variables and conditions which have not already been assigned to a subquery):<br>
 <ul>
   <li><b>Lone variables</b>: Create a subquery for each variable which appears <i>exclusively</i> 
       in unary conditions (conditions involving only that variable). These queries should be evaluated last,
       as the variables declared within them are not required anywhere else and therefore merely increase the 
       size of the resulting match set, which is the cross product of the new variable binding and the elements
       previous match set.
   <li><b>One-variable conditions</b>: Create a subquery for each variable which is involved in unary conditions. 
       These conditions will tend to restrict the number of matches returned for a variable declaration, by 
       specifying a property which must hold for all of those variables. Therefore queries involving these
       conditions can be evaluated early to restrict the size of variable bindings which are later combined with 
       other bindings. This also means that other conditions, involving the same variable in binary relationships, 
       have a wider choice of subqueries across which they can be distributed. They can be placed as early or as 
       late in the ordering as is required, subject to the declaration of the other variables involved.
   <li><b>Single-occurrence variables</b>: Create a subquery for each <i>undeclared</i> variable which 
       appears in only one <i>undistributed</i> condition. This condition must appear with the declaration 
       of the variable. This heuristic is applied repeatedly (using the remaining <i>undeclared</i> variables  
       and <i>undistributed</i> conditions) until it no longer applies.
 </ul>
 <p>
 We are then left with the problem of declaring the remaining variables, distributing the remaining conditions 
 and ordering the resultant simple queries. This final stage is controlled by 
 <method>distributeRemainingConditions()</method> which must be implemented in subclasses.</div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>nmayo@inf.ed.ac.uk</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_net.sourceforge.nite.search.ParserTreeConstants">
<!--   -->
</a>
<h3>Fields inherited from interface&nbsp;net.sourceforge.nite.search.<a href="../../../../../net/sourceforge/nite/search/ParserTreeConstants.html" title="interface in net.sourceforge.nite.search">ParserTreeConstants</a></h3>
<code><a href="../../../../../net/sourceforge/nite/search/ParserTreeConstants.html#JJTCONDITION">JJTCONDITION</a>, <a href="../../../../../net/sourceforge/nite/search/ParserTreeConstants.html#JJTLOGICAL">JJTLOGICAL</a>, <a href="../../../../../net/sourceforge/nite/search/ParserTreeConstants.html#jjtNodeName">jjtNodeName</a>, <a href="../../../../../net/sourceforge/nite/search/ParserTreeConstants.html#JJTQUERY">JJTQUERY</a>, <a href="../../../../../net/sourceforge/nite/search/ParserTreeConstants.html#JJTSIMPLEQUERY">JJTSIMPLEQUERY</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_net.sourceforge.nite.search.rewriter.RewriterConstants">
<!--   -->
</a>
<h3>Fields inherited from interface&nbsp;net.sourceforge.nite.search.rewriter.<a href="../../../../../net/sourceforge/nite/search/rewriter/RewriterConstants.html" title="interface in net.sourceforge.nite.search.rewriter">RewriterConstants</a></h3>
<code><a href="../../../../../net/sourceforge/nite/search/rewriter/RewriterConstants.html#BREAK_LINE">BREAK_LINE</a>, <a href="../../../../../net/sourceforge/nite/search/rewriter/RewriterConstants.html#TEST_QUERIES">TEST_QUERIES</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../net/sourceforge/nite/search/rewriter/ConditionDistributorTemplate.html#ConditionDistributorTemplate(java.util.List,%20java.util.Hashtable)">ConditionDistributorTemplate</a></strong>(java.util.List&nbsp;conds,
                            java.util.Hashtable&nbsp;vars)</code>
<div class="block">Initialise the class with a set of MinimalConditions and DeclarableVariables.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../net/sourceforge/nite/search/rewriter/ConditionDistributorTemplate.html#createSkeletonDeclarations()">createSkeletonDeclarations</a></strong>()</code>
<div class="block">Create skeleton subqueries for any remaining undeclared variables, without 
 appending conditions.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../net/sourceforge/nite/search/NodeQuery.html" title="class in net.sourceforge.nite.search">NodeQuery</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../net/sourceforge/nite/search/rewriter/ConditionDistributorTemplate.html#distribute(net.sourceforge.nite.search.rewriter.DeclarationOrderingScheme)">distribute</a></strong>(<a href="../../../../../net/sourceforge/nite/search/rewriter/DeclarationOrderingScheme.html" title="interface in net.sourceforge.nite.search.rewriter">DeclarationOrderingScheme</a>&nbsp;orderingScheme)</code>
<div class="block">Distribute the conditions and variable declarations across a
 new set of SimpleQueries, returning the resultant complex query.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.util.List</code></td>
<td class="colLast"><code><strong><a href="../../../../../net/sourceforge/nite/search/rewriter/ConditionDistributorTemplate.html#getTypes(java.lang.String)">getTypes</a></strong>(java.lang.String&nbsp;varName)</code>
<div class="block">Get the types associated with a particular variable.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="ConditionDistributorTemplate(java.util.List, java.util.Hashtable)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ConditionDistributorTemplate</h4>
<pre>public&nbsp;ConditionDistributorTemplate(java.util.List&nbsp;conds,
                            java.util.Hashtable&nbsp;vars)</pre>
<div class="block">Initialise the class with a set of MinimalConditions and DeclarableVariables.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>conds</code> - a List of MinimalCondition objects representing SimpleNodes which should be distributed</dd><dd><code>vars</code> - a Hashtable mapping each variable name to a DeclarableVariable object</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="distribute(net.sourceforge.nite.search.rewriter.DeclarationOrderingScheme)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>distribute</h4>
<pre>public final&nbsp;<a href="../../../../../net/sourceforge/nite/search/NodeQuery.html" title="class in net.sourceforge.nite.search">NodeQuery</a>&nbsp;distribute(<a href="../../../../../net/sourceforge/nite/search/rewriter/DeclarationOrderingScheme.html" title="interface in net.sourceforge.nite.search.rewriter">DeclarationOrderingScheme</a>&nbsp;orderingScheme)</pre>
<div class="block">Distribute the conditions and variable declarations across a
 new set of SimpleQueries, returning the resultant complex query.
 This is the template method, describing at a high level the steps
 of the distribution algorithm.
 <p>
 We may wish to add hooks to this algorithm for subclasses to 
 provide actions between stages.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../net/sourceforge/nite/search/rewriter/ConditionDistributor.html#distribute(net.sourceforge.nite.search.rewriter.DeclarationOrderingScheme)">distribute</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../net/sourceforge/nite/search/rewriter/ConditionDistributor.html" title="interface in net.sourceforge.nite.search.rewriter">ConditionDistributor</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>orderingScheme</code> - a DeclarationOrderingScheme to use in ordering subqueries</dd>
<dt><span class="strong">Returns:</span></dt><dd>a new query</dd></dl>
</li>
</ul>
<a name="createSkeletonDeclarations()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createSkeletonDeclarations</h4>
<pre>public&nbsp;void&nbsp;createSkeletonDeclarations()</pre>
<div class="block">Create skeleton subqueries for any remaining undeclared variables, without 
 appending conditions.</div>
</li>
</ul>
<a name="getTypes(java.lang.String)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getTypes</h4>
<pre>public&nbsp;java.util.List&nbsp;getTypes(java.lang.String&nbsp;varName)</pre>
<div class="block">Get the types associated with a particular variable.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../net/sourceforge/nite/search/rewriter/ConditionDistributor.html#getTypes(java.lang.String)">getTypes</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../net/sourceforge/nite/search/rewriter/ConditionDistributor.html" title="interface in net.sourceforge.nite.search.rewriter">ConditionDistributor</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>varName</code> - a String naming the variable</dd>
<dt><span class="strong">Returns:</span></dt><dd>a List of the types the variable is bound to</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../net/sourceforge/nite/search/rewriter/ConditionDistributor.html" title="interface in net.sourceforge.nite.search.rewriter"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../net/sourceforge/nite/search/rewriter/DeclarableVariable.html" title="class in net.sourceforge.nite.search.rewriter"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?net/sourceforge/nite/search/rewriter/ConditionDistributorTemplate.html" target="_top">Frames</a></li>
<li><a href="ConditionDistributorTemplate.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
